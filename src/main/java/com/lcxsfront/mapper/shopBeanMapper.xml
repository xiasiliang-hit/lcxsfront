<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lcxsfront.mapper.shopBeanMapper" >
  <resultMap id="BaseResultMap" type="com.lcxsfront.model.shopBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 19 14:18:14 CST 2018.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="shopid" property="shopid" jdbcType="BIGINT" />
    <result column="shopname" property="shopname" jdbcType="VARCHAR" />
    <result column="shopphone" property="shopphone" jdbcType="VARCHAR" />
    <result column="regcap" property="regcap" jdbcType="DOUBLE" />
    <result column="background" property="background" jdbcType="VARCHAR" />
    <result column="channel" property="channel" jdbcType="VARCHAR" />
    <result column="address" property="address" jdbcType="VARCHAR" />
    <result column="financing" property="financing" jdbcType="VARCHAR" />
    <result column="risk" property="risk" jdbcType="INTEGER" />
    <result column="area" property="area" jdbcType="VARCHAR" />
    <result column="recommend" property="recommend" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="tag" property="tag" jdbcType="VARCHAR" />
    <result column="sort" property="sort" jdbcType="INTEGER" />
    <result column="logo" property="logo" jdbcType="VARCHAR" />
    <result column="more" property="more" jdbcType="VARCHAR" />
    <result column="shopurl" property="shopurl" jdbcType="VARCHAR" />
    <result column="smurl" property="smurl" jdbcType="VARCHAR" />
    <result column="pcurl" property="pcurl" jdbcType="VARCHAR" />
    <result column="appurl" property="appurl" jdbcType="VARCHAR" />
    <result column="ctime" property="ctime" jdbcType="VARCHAR" />
    <result column="mtime" property="mtime" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.lcxsfront.model.shopBean" extends="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 19 14:18:14 CST 2018.
    -->
    <result column="context" property="context" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 19 14:18:14 CST 2018.
    -->
    id, shopid, shopname, shopphone, regcap, background, channel, address, financing, 
    risk, area, recommend, status, tag, sort, logo, more, shopurl, smurl, pcurl, appurl, 
    ctime, mtime
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 19 14:18:14 CST 2018.
    -->
    context
  </sql>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 19 14:18:14 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from c_shop
    where id = #{id,jdbcType=BIGINT}
  </select>
  
  <select id="queryAll" resultType="com.lcxsfront.model.frontBean" parameterType="com.lcxsfront.model.frontBean">
  select p.xnh as xnh,p.example as tincome,p.people as people,s.risk as risk,p.qx as qx,
  p.minmoney as money,s.logo as logo,s.tag as tag,p.pid as id,p.typestz as typestz  from c_shop s INNER JOIN 
c_product p on s.shopid=p.shopid and s.status=1 and p.status=1
	<if test="tincome!='' and tincome!=null">
		and (s.shopname like "%"#{tincome}"%" or p.pname like "%"#{tincome}"%")
	</if>
	<if test="minxnh!=null and minxnh!=''">
		and p.typesyl=#{minxnh}
	</if>
 GROUP BY p.pid
 	<if test="xnh!=null and xnh!=''">
 		order by s.sort desc
 	</if>
 	<if test="maxxnh!=null and maxxnh!='' and maxxnh%2!=0">
 		order by p.xnh desc
 	</if>
 	<if test="maxxnh!=null and maxxnh!='' and maxxnh%2!=1">
 		order by p.xnh 
 	</if>
 	<if test="minzq!=null and minzq!='' and minzq%2!=0">
 		order by p.ctime desc
 	</if>
 	<if test="minzq!=null and minzq!='' and minzq%2!=1">
 		order by p.ctime
 	</if>
 	<if test="maxzq!=null and maxzq!='' and maxzq%2!=0">
 		order by p.typestz desc
 	</if>
 	<if test="maxzq!=null and maxzq!='' and maxzq%2!=1">
 		order by p.typestz
 	</if>
 	<if test="risk!=null and risk!='' and risk%2!=0">
 		order by s.risk desc
 	</if>
 	<if test="risk!=null and risk!='' and risk%2!=1">
 		order by s.risk 
 	</if>
  LIMIT #{page},#{limit}
  </select>
  
  <select id="queryShopListByFy" resultType="com.lcxsfront.model.frontBean" parameterType="com.lcxsfront.model.frontBean">
  	select p.xnh as xnh,p.example as tincome,p.people as people,s.risk as risk,p.qx as qx,
    p.minmoney as money,s.logo as logo,s.tag as tag,p.pid as id,p.typestz as typestz  from c_shop s INNER JOIN 
	c_product p on s.shopid=p.shopid and s.status=1 and p.status=1
	<if test="typesyl!=null and typesyl!=''">
			and p.typesyl=#{typesyl}
	</if>
	<if test="minxnh!=0">
		and p.xnh between #{minxnh} and #{maxxnh}
	</if>
	<if test="minzq!=0">
		and p.qx between #{minzq} and #{maxzq}
	</if>
	<if test="tincome!=null  and tincome!=''">
		and (s.shopname like "%"#{tincome}"%" or p.pname like "%"#{tincome}"%")
	</if>
	GROUP BY p.pid LIMIT #{page},#{limit}
  </select>
  
  <select id="queryBanner" resultType="com.lcxsfront.model.banner">
  	select picture,link from c_banner where status=1 and type=1 and title like "%PC%" order by sort desc
  </select>
  
  <select id="queryBannerForApp" resultType="com.lcxsfront.model.banner">
  	select picture,link from c_banner where status=1 and type=2 and title like "%APP%" order by sort desc
  </select>
  
  
  <select id="queryShopSmall" resultType="com.lcxsfront.model.shopBean" parameterType="com.lcxsfront.model.noteBean">
  	select logo,shopname,tag from c_shop where status=1 limit #{page},#{limit}
  </select>
  
  <select id="queryShopList" resultType="java.lang.Object" parameterType="com.lcxsfront.model.frontBean">
	select p.pid from c_shop s INNER JOIN c_product p on 
	s.shopid=p.shopid and s.status=1 and p.status=1
	<if test="typesyl!=null">
			and p.typesyl=#{typesyl}
	</if>
	<if test="minxnh!=0">
		and p.xnh between #{minxnh} and #{maxxnh}
	</if>
	<if test="minzq!=0">
		and p.qx between #{minzq} and #{maxzq}
	</if>
	<if test="tincome!=null">
		and (s.shopname like "%"#{tincome}"%" or p.pname like "%"#{tincome}"%")
	</if>
	GROUP BY p.pid
  </select>
  
  <select id="queryProductByPid" resultType="com.lcxsfront.model.productMessageBean" parameterType="java.lang.Long">
	select c.pcurl as pcurl,c.logo as logo,p.pid as pid,p.level as level,p.typestz as typestz,
	p.example as example,p.pname as pname,c.shopurl as shopurl,c.tag as tag,
	p.minmoney as minmoney,c.recommend as recommend,c.shopname as shopname,c.ctime as ctime,
	c.regcap as regcap,c.area as area,c.context as context,p.xnh as xnh,
	c.background as background,c.financing as financing,p.context as contend,
	c.risk as risk,p.people as people,p.status as status,c.appurl as appurl
	 from c_shop c INNER JOIN c_product p 
	on p.shopid=c.shopid and p.pid=#{pid} 
  </select>
  
  <select id="queryAllShop" resultType="java.lang.Integer">
  	select count(1) from c_shop
  </select> 
  
  <select id="queryLogo" resultType="com.lcxsfront.model.shopBean">
  	select logo from c_shop where status=1 limit 0,48
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 19 14:18:14 CST 2018.
    -->
    delete from c_shop
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.lcxsfront.model.shopBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 19 14:18:14 CST 2018.
    -->
    insert into c_shop (id, shopid, shopname, 
      shopphone, regcap, background, 
      channel, address, financing, 
      risk, area, recommend, 
      status, tag, sort, 
      logo, more, shopurl, 
      smurl, pcurl, appurl, 
      ctime, mtime, context
      )
    values (#{id,jdbcType=BIGINT}, #{shopid,jdbcType=BIGINT}, #{shopname,jdbcType=VARCHAR}, 
      #{shopphone,jdbcType=VARCHAR}, #{regcap,jdbcType=DOUBLE}, #{background,jdbcType=VARCHAR}, 
      #{channel,jdbcType=VARCHAR}, #{address,jdbcType=VARCHAR}, #{financing,jdbcType=VARCHAR}, 
      #{risk,jdbcType=INTEGER}, #{area,jdbcType=VARCHAR}, #{recommend,jdbcType=VARCHAR}, 
      #{status,jdbcType=INTEGER}, #{tag,jdbcType=VARCHAR}, #{sort,jdbcType=INTEGER}, 
      #{logo,jdbcType=VARCHAR}, #{more,jdbcType=VARCHAR}, #{shopurl,jdbcType=VARCHAR}, 
      #{smurl,jdbcType=VARCHAR}, #{pcurl,jdbcType=VARCHAR}, #{appurl,jdbcType=VARCHAR}, 
      #{ctime,jdbcType=VARCHAR}, #{mtime,jdbcType=VARCHAR}, #{context,jdbcType=LONGVARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.lcxsfront.model.shopBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 19 14:18:14 CST 2018.
    -->
    insert into c_shop
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="shopid != null" >
        shopid,
      </if>
      <if test="shopname != null" >
        shopname,
      </if>
      <if test="shopphone != null" >
        shopphone,
      </if>
      <if test="regcap != null" >
        regcap,
      </if>
      <if test="background != null" >
        background,
      </if>
      <if test="channel != null" >
        channel,
      </if>
      <if test="address != null" >
        address,
      </if>
      <if test="financing != null" >
        financing,
      </if>
      <if test="risk != null" >
        risk,
      </if>
      <if test="area != null" >
        area,
      </if>
      <if test="recommend != null" >
        recommend,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="tag != null" >
        tag,
      </if>
      <if test="sort != null" >
        sort,
      </if>
      <if test="logo != null" >
        logo,
      </if>
      <if test="more != null" >
        more,
      </if>
      <if test="shopurl != null" >
        shopurl,
      </if>
      <if test="smurl != null" >
        smurl,
      </if>
      <if test="pcurl != null" >
        pcurl,
      </if>
      <if test="appurl != null" >
        appurl,
      </if>
      <if test="ctime != null" >
        ctime,
      </if>
      <if test="mtime != null" >
        mtime,
      </if>
      <if test="context != null" >
        context,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="shopid != null" >
        #{shopid,jdbcType=BIGINT},
      </if>
      <if test="shopname != null" >
        #{shopname,jdbcType=VARCHAR},
      </if>
      <if test="shopphone != null" >
        #{shopphone,jdbcType=VARCHAR},
      </if>
      <if test="regcap != null" >
        #{regcap,jdbcType=DOUBLE},
      </if>
      <if test="background != null" >
        #{background,jdbcType=VARCHAR},
      </if>
      <if test="channel != null" >
        #{channel,jdbcType=VARCHAR},
      </if>
      <if test="address != null" >
        #{address,jdbcType=VARCHAR},
      </if>
      <if test="financing != null" >
        #{financing,jdbcType=VARCHAR},
      </if>
      <if test="risk != null" >
        #{risk,jdbcType=INTEGER},
      </if>
      <if test="area != null" >
        #{area,jdbcType=VARCHAR},
      </if>
      <if test="recommend != null" >
        #{recommend,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=INTEGER},
      </if>
      <if test="tag != null" >
        #{tag,jdbcType=VARCHAR},
      </if>
      <if test="sort != null" >
        #{sort,jdbcType=INTEGER},
      </if>
      <if test="logo != null" >
        #{logo,jdbcType=VARCHAR},
      </if>
      <if test="more != null" >
        #{more,jdbcType=VARCHAR},
      </if>
      <if test="shopurl != null" >
        #{shopurl,jdbcType=VARCHAR},
      </if>
      <if test="smurl != null" >
        #{smurl,jdbcType=VARCHAR},
      </if>
      <if test="pcurl != null" >
        #{pcurl,jdbcType=VARCHAR},
      </if>
      <if test="appurl != null" >
        #{appurl,jdbcType=VARCHAR},
      </if>
      <if test="ctime != null" >
        #{ctime,jdbcType=VARCHAR},
      </if>
      <if test="mtime != null" >
        #{mtime,jdbcType=VARCHAR},
      </if>
      <if test="context != null" >
        #{context,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.lcxsfront.model.shopBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 19 14:18:14 CST 2018.
    -->
    update c_shop
    <set >
      <if test="shopid != null" >
        shopid = #{shopid,jdbcType=BIGINT},
      </if>
      <if test="shopname != null" >
        shopname = #{shopname,jdbcType=VARCHAR},
      </if>
      <if test="shopphone != null" >
        shopphone = #{shopphone,jdbcType=VARCHAR},
      </if>
      <if test="regcap != null" >
        regcap = #{regcap,jdbcType=DOUBLE},
      </if>
      <if test="background != null" >
        background = #{background,jdbcType=VARCHAR},
      </if>
      <if test="channel != null" >
        channel = #{channel,jdbcType=VARCHAR},
      </if>
      <if test="address != null" >
        address = #{address,jdbcType=VARCHAR},
      </if>
      <if test="financing != null" >
        financing = #{financing,jdbcType=VARCHAR},
      </if>
      <if test="risk != null" >
        risk = #{risk,jdbcType=INTEGER},
      </if>
      <if test="area != null" >
        area = #{area,jdbcType=VARCHAR},
      </if>
      <if test="recommend != null" >
        recommend = #{recommend,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="tag != null" >
        tag = #{tag,jdbcType=VARCHAR},
      </if>
      <if test="sort != null" >
        sort = #{sort,jdbcType=INTEGER},
      </if>
      <if test="logo != null" >
        logo = #{logo,jdbcType=VARCHAR},
      </if>
      <if test="more != null" >
        more = #{more,jdbcType=VARCHAR},
      </if>
      <if test="shopurl != null" >
        shopurl = #{shopurl,jdbcType=VARCHAR},
      </if>
      <if test="smurl != null" >
        smurl = #{smurl,jdbcType=VARCHAR},
      </if>
      <if test="pcurl != null" >
        pcurl = #{pcurl,jdbcType=VARCHAR},
      </if>
      <if test="appurl != null" >
        appurl = #{appurl,jdbcType=VARCHAR},
      </if>
      <if test="ctime != null" >
        ctime = #{ctime,jdbcType=VARCHAR},
      </if>
      <if test="mtime != null" >
        mtime = #{mtime,jdbcType=VARCHAR},
      </if>
      <if test="context != null" >
        context = #{context,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.lcxsfront.model.shopBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 19 14:18:14 CST 2018.
    -->
    update c_shop
    set shopid = #{shopid,jdbcType=BIGINT},
      shopname = #{shopname,jdbcType=VARCHAR},
      shopphone = #{shopphone,jdbcType=VARCHAR},
      regcap = #{regcap,jdbcType=DOUBLE},
      background = #{background,jdbcType=VARCHAR},
      channel = #{channel,jdbcType=VARCHAR},
      address = #{address,jdbcType=VARCHAR},
      financing = #{financing,jdbcType=VARCHAR},
      risk = #{risk,jdbcType=INTEGER},
      area = #{area,jdbcType=VARCHAR},
      recommend = #{recommend,jdbcType=VARCHAR},
      status = #{status,jdbcType=INTEGER},
      tag = #{tag,jdbcType=VARCHAR},
      sort = #{sort,jdbcType=INTEGER},
      logo = #{logo,jdbcType=VARCHAR},
      more = #{more,jdbcType=VARCHAR},
      shopurl = #{shopurl,jdbcType=VARCHAR},
      smurl = #{smurl,jdbcType=VARCHAR},
      pcurl = #{pcurl,jdbcType=VARCHAR},
      appurl = #{appurl,jdbcType=VARCHAR},
      ctime = #{ctime,jdbcType=VARCHAR},
      mtime = #{mtime,jdbcType=VARCHAR},
      context = #{context,jdbcType=LONGVARCHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.lcxsfront.model.shopBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 19 14:18:14 CST 2018.
    -->
    update c_shop
    set shopid = #{shopid,jdbcType=BIGINT},
      shopname = #{shopname,jdbcType=VARCHAR},
      shopphone = #{shopphone,jdbcType=VARCHAR},
      regcap = #{regcap,jdbcType=DOUBLE},
      background = #{background,jdbcType=VARCHAR},
      channel = #{channel,jdbcType=VARCHAR},
      address = #{address,jdbcType=VARCHAR},
      financing = #{financing,jdbcType=VARCHAR},
      risk = #{risk,jdbcType=INTEGER},
      area = #{area,jdbcType=VARCHAR},
      recommend = #{recommend,jdbcType=VARCHAR},
      status = #{status,jdbcType=INTEGER},
      tag = #{tag,jdbcType=VARCHAR},
      sort = #{sort,jdbcType=INTEGER},
      logo = #{logo,jdbcType=VARCHAR},
      more = #{more,jdbcType=VARCHAR},
      shopurl = #{shopurl,jdbcType=VARCHAR},
      smurl = #{smurl,jdbcType=VARCHAR},
      pcurl = #{pcurl,jdbcType=VARCHAR},
      appurl = #{appurl,jdbcType=VARCHAR},
      ctime = #{ctime,jdbcType=VARCHAR},
      mtime = #{mtime,jdbcType=VARCHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>
</mapper>