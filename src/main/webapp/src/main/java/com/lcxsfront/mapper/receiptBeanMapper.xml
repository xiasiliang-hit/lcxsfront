<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lcxsfront.mapper.receiptBeanMapper">
  <resultMap id="BaseResultMap" type="com.lcxsfront.model.receiptBean">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 27 18:08:47 CST 2018.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="rid" jdbcType="BIGINT" property="rid" />
    <result column="shopname" jdbcType="VARCHAR" property="shopname" />
    <result column="productid" jdbcType="BIGINT" property="productid" />
    <result column="productname" jdbcType="VARCHAR" property="productname" />
    <result column="caseid" jdbcType="BIGINT" property="caseid" />
    <result column="tmoney" jdbcType="DOUBLE" property="tmoney" />
    <result column="jmoney" jdbcType="DOUBLE" property="jmoney" />
    <result column="channel" jdbcType="VARCHAR" property="channel" />
    <result column="realname" jdbcType="VARCHAR" property="realname" />
    <result column="phone" jdbcType="VARCHAR" property="phone" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="auditor" jdbcType="VARCHAR" property="auditor" />
    <result column="context" jdbcType="VARCHAR" property="context" />
    <result column="ttime" jdbcType="VARCHAR" property="ttime" />
    <result column="ctime" jdbcType="VARCHAR" property="ctime" />
    <result column="mtime" jdbcType="VARCHAR" property="mtime" />
    <result column="redmoney" jdbcType="DOUBLE" property="redmoney" />
    <result column="redid" jdbcType="BIGINT" property="redid" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 27 18:08:47 CST 2018.
    -->
    id, rid, shopname, productid, productname, caseid, tmoney, jmoney, channel, realname, 
    phone, status, auditor, context, ttime, ctime, mtime, redmoney, redid
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 27 18:08:47 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from c_receipt
    where id = #{id,jdbcType=BIGINT}
  </select>
  
  <select id="queryNumByProductId" resultType="java.lang.Object" parameterType="java.lang.Long">
  	select count(1) from c_receipt where productid=#{id}
  </select>
  
  
  <select id="queryReceiptByVidForApp" resultType="com.lcxsfront.model.frontBean" parameterType="com.lcxsfront.model.frontBean">
  	select z.ctime as typestz,z.status as qx,z.ttmoney as money,z.tmoney as tmoney
  	,s.logo as logo,z.context as xnh from c_shop s INNER JOIN
	(select r.shopname,r.tmoney,r.jmoney+r.redmoney as ttmoney,r.status,r.ctime,r.context 
	from c_user_receipt c INNER JOIN c_receipt r on 
	c.rid=r.rid and c.vid=#{id}
	<if test="risk==0">
		and r.status=3
	</if>
	<if test="risk!=0">
		and r.status!=3
	</if>
	)z
	on s.shopname=z.shopname and s.status=1 order by z.ctime desc LIMIT #{page},#{limit}
  </select>
  
  
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 27 18:08:47 CST 2018.
    -->
    delete from c_receipt
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.lcxsfront.model.receiptBean">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 27 18:08:47 CST 2018.
    -->
    insert into c_receipt (id, rid, shopname, 
      productid, productname, caseid, 
      tmoney, jmoney, channel, 
      realname, phone, status, 
      auditor, context, ttime, 
      ctime, mtime, redmoney, 
      redid)
    values (#{id,jdbcType=BIGINT}, #{rid,jdbcType=BIGINT}, #{shopname,jdbcType=VARCHAR}, 
      #{productid,jdbcType=BIGINT}, #{productname,jdbcType=VARCHAR}, #{caseid,jdbcType=BIGINT}, 
      #{tmoney,jdbcType=DOUBLE}, #{jmoney,jdbcType=DOUBLE}, #{channel,jdbcType=VARCHAR}, 
      #{realname,jdbcType=VARCHAR}, #{phone,jdbcType=VARCHAR}, #{status,jdbcType=INTEGER}, 
      #{auditor,jdbcType=VARCHAR}, #{context,jdbcType=VARCHAR}, #{ttime,jdbcType=VARCHAR}, 
      #{ctime,jdbcType=VARCHAR}, #{mtime,jdbcType=VARCHAR}, #{redmoney,jdbcType=DOUBLE}, 
      #{redid,jdbcType=BIGINT})
  </insert>
  <insert id="insertSelective" parameterType="com.lcxsfront.model.receiptBean">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 27 18:08:47 CST 2018.
    -->
    insert into c_receipt
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="rid != null">
        rid,
      </if>
      <if test="shopname != null">
        shopname,
      </if>
      <if test="productid != null">
        productid,
      </if>
      <if test="productname != null">
        productname,
      </if>
      <if test="caseid != null">
        caseid,
      </if>
      <if test="tmoney != null">
        tmoney,
      </if>
      <if test="jmoney != null">
        jmoney,
      </if>
      <if test="channel != null">
        channel,
      </if>
      <if test="realname != null">
        realname,
      </if>
      <if test="phone != null">
        phone,
      </if>
      <if test="status != null">
        status,
      </if>
      <if test="auditor != null">
        auditor,
      </if>
      <if test="context != null">
        context,
      </if>
      <if test="ttime != null">
        ttime,
      </if>
      <if test="ctime != null">
        ctime,
      </if>
      <if test="mtime != null">
        mtime,
      </if>
      <if test="redmoney != null">
        redmoney,
      </if>
      <if test="redid != null">
        redid,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=BIGINT},
      </if>
      <if test="rid != null">
        #{rid,jdbcType=BIGINT},
      </if>
      <if test="shopname != null">
        #{shopname,jdbcType=VARCHAR},
      </if>
      <if test="productid != null">
        #{productid,jdbcType=BIGINT},
      </if>
      <if test="productname != null">
        #{productname,jdbcType=VARCHAR},
      </if>
      <if test="caseid != null">
        #{caseid,jdbcType=BIGINT},
      </if>
      <if test="tmoney != null">
        #{tmoney,jdbcType=DOUBLE},
      </if>
      <if test="jmoney != null">
        #{jmoney,jdbcType=DOUBLE},
      </if>
      <if test="channel != null">
        #{channel,jdbcType=VARCHAR},
      </if>
      <if test="realname != null">
        #{realname,jdbcType=VARCHAR},
      </if>
      <if test="phone != null">
        #{phone,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        #{status,jdbcType=INTEGER},
      </if>
      <if test="auditor != null">
        #{auditor,jdbcType=VARCHAR},
      </if>
      <if test="context != null">
        #{context,jdbcType=VARCHAR},
      </if>
      <if test="ttime != null">
        #{ttime,jdbcType=VARCHAR},
      </if>
      <if test="ctime != null">
        #{ctime,jdbcType=VARCHAR},
      </if>
      <if test="mtime != null">
        #{mtime,jdbcType=VARCHAR},
      </if>
      <if test="redmoney != null">
        #{redmoney,jdbcType=DOUBLE},
      </if>
      <if test="redid != null">
        #{redid,jdbcType=BIGINT},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.lcxsfront.model.receiptBean">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 27 18:08:47 CST 2018.
    -->
    update c_receipt
    <set>
      <if test="rid != null">
        rid = #{rid,jdbcType=BIGINT},
      </if>
      <if test="shopname != null">
        shopname = #{shopname,jdbcType=VARCHAR},
      </if>
      <if test="productid != null">
        productid = #{productid,jdbcType=BIGINT},
      </if>
      <if test="productname != null">
        productname = #{productname,jdbcType=VARCHAR},
      </if>
      <if test="caseid != null">
        caseid = #{caseid,jdbcType=BIGINT},
      </if>
      <if test="tmoney != null">
        tmoney = #{tmoney,jdbcType=DOUBLE},
      </if>
      <if test="jmoney != null">
        jmoney = #{jmoney,jdbcType=DOUBLE},
      </if>
      <if test="channel != null">
        channel = #{channel,jdbcType=VARCHAR},
      </if>
      <if test="realname != null">
        realname = #{realname,jdbcType=VARCHAR},
      </if>
      <if test="phone != null">
        phone = #{phone,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="auditor != null">
        auditor = #{auditor,jdbcType=VARCHAR},
      </if>
      <if test="context != null">
        context = #{context,jdbcType=VARCHAR},
      </if>
      <if test="ttime != null">
        ttime = #{ttime,jdbcType=VARCHAR},
      </if>
      <if test="ctime != null">
        ctime = #{ctime,jdbcType=VARCHAR},
      </if>
      <if test="mtime != null">
        mtime = #{mtime,jdbcType=VARCHAR},
      </if>
      <if test="redmoney != null">
        redmoney = #{redmoney,jdbcType=DOUBLE},
      </if>
      <if test="redid != null">
        redid = #{redid,jdbcType=BIGINT},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.lcxsfront.model.receiptBean">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 27 18:08:47 CST 2018.
    -->
    update c_receipt
    set rid = #{rid,jdbcType=BIGINT},
      shopname = #{shopname,jdbcType=VARCHAR},
      productid = #{productid,jdbcType=BIGINT},
      productname = #{productname,jdbcType=VARCHAR},
      caseid = #{caseid,jdbcType=BIGINT},
      tmoney = #{tmoney,jdbcType=DOUBLE},
      jmoney = #{jmoney,jdbcType=DOUBLE},
      channel = #{channel,jdbcType=VARCHAR},
      realname = #{realname,jdbcType=VARCHAR},
      phone = #{phone,jdbcType=VARCHAR},
      status = #{status,jdbcType=INTEGER},
      auditor = #{auditor,jdbcType=VARCHAR},
      context = #{context,jdbcType=VARCHAR},
      ttime = #{ttime,jdbcType=VARCHAR},
      ctime = #{ctime,jdbcType=VARCHAR},
      mtime = #{mtime,jdbcType=VARCHAR},
      redmoney = #{redmoney,jdbcType=DOUBLE},
      redid = #{redid,jdbcType=BIGINT}
    where id = #{id,jdbcType=BIGINT}
  </update>
  
  <select id="queryTotalMoney" resultType="java.lang.Object">
  	select SUM(jmoney)+SUM(redmoney)  from c_receipt 
  </select>
  
  <select id="queryTmoney" resultType="java.lang.Object">
  	select SUM(tmoney) from c_receipt
  </select>
  
  <select id="qeuryUser" resultType="java.lang.Object">
	select id from c_user  
  </select>
</mapper>